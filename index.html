<!DOCTYPE html>
<html>
  <head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Game title</title>
  
    <link href="/style.css" rel="stylesheet" type="text/css" media="all">
  </head>

  <body onLoad="Draw ()">

    <main>
       
    <section> <!-- landing -->
      <h1>landing </h1>
      <p>beautiful logo!!</p>
    </section>
    
      <section><!-- demo -->
     <h1>Demo </h1>
        <p> demo video, screenshots, summary, etc</p>
        
    </section>
    
    <section> <!-- game -->
        <h1>Game </h1>
    
        <p>instructions/controls/how to play:</p>

<!-- load javascript so we can draw on canvas -->
<canvas id="myCanvas" width="600" height="600" 
        style="border:4px solid #ff0000; background-color:rgb(255, 255, 255)">
        Sorry, your browser does not support canvas.
        </canvas>
<script>

const canvas = document.querySelector('canvas')
const c = canvas.getContext('2d')
let key = 'f'

canvas.width = innerWidth
canvas.height = innerHeight

Character = new Image ();
Character.src = "placeholder sprites/MCF.JPG";

//CLASSES START///////////////////////////////////////////////////////////////////////////////////////////

//PLAYER CHARACTER
class Player {
  constructor({
    position = { x: 200, y: 200 },
    color = 'red',
    width = 100,
    height = 100,
    velocity = { x: 0, y: 0 },
  }) {
    this.position = position
    this.width = width
    this.height = height
    this.color = color
    this.velocity = velocity
  }

  draw() {
    //c.lineWidth = 3
   //c.strokeStyle = this.color
    //c.strokeRect(this.position.x, this.position.y, this.width, this.height)
    c.drawImage(Character,this.position.x, this.position.y, this.width, this.height)
  }}

  //DOORS
  class Door {
  constructor({
    position = { x: 200, y: 200 },
    color = 'blue',
    width = 100,
    height = 100,
    velocity = { x: 0, y: 0 },
  }) {
    this.position = position
    this.width = width
    this.height = height
    this.color = color
    this.velocity = velocity
  }

  draw() {
    c.lineWidth = 3
    c.strokeStyle = this.color
    c.strokeRect(this.position.x, this.position.y, this.width, this.height)
    
  }
}

//FLOOR
  class Floor {
  constructor({
    position = { x: 120, y: 160 },
    color = 'blue',
    width = 10,
    height = 10,
    velocity = { x: 0, y: 0 },
  }) {
    this.position = position
    this.width = width
    this.height = height
    this.color = color
    this.velocity = velocity
  }

  draw() {
  c.strokeStyle = this.color
  c.strokeRect(this.position.x, this.position.y, this.width, this.height)

    
  }
}

//CLASSES END///////////////////////////////////////////////////////////////////////////////////////////



// get canvas center
const center = {
  x: canvas.width / 2,
  y: canvas.height / 2,
}

// instantiate Player
const player1 = new Player({
  position: {
    x: center.x - 120,
    y: center.y - 50,
  },
  velocity: {
    x: 0,
  },
})

// initiate Doors
const door1 = new Door({
  position: {
    x: 300,
    y: 300,
  },
  color: 'blue',
})

// initiate floor
const floor1 = new Floor({
  position: {
    x: 120,
    y: 140
  },
  width: 350,
  height: 20,
  color: 'red'
})

const floor2 = new Floor({
  position: {
    x: 470,
    y: 160
  },
  width: 20,
  height: 350,
  color: 'orange'
})

const floor3 = new Floor({
  position: {
    x: 100,
    y: 160
  },
  width: 20,
  height: 350,
  color: 'green'
})

const floor4 = new Floor({
  position: {
    x: 120,
    y: 510
  },
  width: 350,
  height: 20,
  color: 'purple'
})


function collision({ player1, door1 }) {
  return (
    player1.position.x + player1.width >= door1.position.x && // player1 right collides with door1 left
    door1.position.x + door1.width >= player1.position.x && // door1 right collides with player1 left
    player1.position.y + player1.height >= door1.position.y && // player1 bottom collides with door1 top
    door1.position.y + door1.height >= player1.position.y // player1 top collides with door1 bottom
  )
}

function collision1({ player1, floor1 }) {
  return (
    floor1.position.y + floor1.height >= player1.position.y // player1 top collides with door1 bottom
  )
}

function collision2({ player1, floor2 }) {
  return (
    player1.position.x + player1.width >= door1.position.x  // player1 right collides with door1 left
  )
}

function collision3({ player1, floor3 }) {
  return (
    floor3.position.x + floor3.width >= player1.position.x  // door1 right collides with player1 left
  )
}

function collision4({ player1, floor4 }) {
  return (
  player1.position.y + player1.height >= floor4.position.y // player1 bottom collides with door1 top

  )
}




/*function collision2({ player1, floor1 }) {
  return (
  player1.position.x + player1.width >= floor1.position.x &&
  floor1.position.x + floor1.width >= player1.position.x &&
  player1.position.y + player1.height >= floor1.position.y &&
  floor1.position.y+ floor1.height >= player1.position.y  
  )
}*/


let frame = 0

setInterval(() => {
  frame++

  // add gray background
  c.fillStyle = 'rgb(39,39,42)'
  c.fillRect(0, 0, canvas.width, canvas.height)

  // draw boxes
  player1.draw()
  door1.draw()
  floor1.draw()
  floor2.draw()
  floor3.draw()
  floor4.draw()


  // update x position before render
  player1.position.x += player1.velocity.x

  if (collision({ player1, door1 })) {
      if (Key == 'd'){//box 1 top corner is set to box 2's top left corner - door1's width - 1
        player1.position.x = door1.position.x - door1.width - 1}
      if (Key =='a'){//box 1 top corner is set to door1's top right corner (top left corner + door1's width) + 1
        player1.position.x = door1.position.x + door1.width +1}
      if (Key == 'w'){//player1 top left corner is set to door1's bottom left corner (top left corner + height) +1
        player1.position.y = door1.position.y +door1.height+1}
      if (Key == 's'){//player1 top left corner is set to door1's top left corner - door1's height -1
        player1.position.y = door1.position.y - door1.height - 1}

  }

  

  /*
  if (collision2({ player1, floor1 })) {
      if (Key == 'd'){//player top right colliding with right boundary
        player1.position.x = floor1.position.x +floor1.width - player1.width
        }
      
      if (Key =='a'){//player top left colliding with left boundary
        player1.position.x = floor1.position.x + 1
        }
      
      if (Key == 'w'){//player top left colliding with top boundary
        player1.position.y = floor1.position.y + 1
        }

      
      if (Key == 's'){//player bottom left colliding with bottom boundary
        player1.position.y = floor1.position.y + floor1.height - player1.height
        
        }
  }*/

  if (collision1({ player1, floor1 })) {
      if (Key == 'w'){//player1 top left corner is set to door1's bottom left corner (top left corner + height) +1
        player1.position.y = floor1.position.y +floor1.height+1}
  }

  if (collision2({ player1, floor2 })) {
      if (Key == 'd'){//player top right colliding with right boundary
        player1.position.x = floor1.position.x +floor1.width - player1.width
        }
  }

  if (collision3({ player1, floor3 })) {
      if (Key =='a'){//player top left colliding with left boundary
        player1.position.x = floor1.position.x + 1
        }
  }

  if (collision4({ player1, floor4 })) {
      if (Key == 's'){//player bottom left colliding with bottom boundary
        player1.position.y = floor4.position.y + floor4.height - player1.height
        }
  }
 
 
 

}, 100)


        window.addEventListener('keydown', detectRight) //event listner only listens for 1 action
        window.addEventListener('keydown', detectDown)
        window.addEventListener('keydown', detectLeft)
        window.addEventListener('keydown', detectUp)

      //boundary 
        window.addEventListener('keydown', FloorB) //bottom
        window.addEventListener('keydown', FloorL) //left
        window.addEventListener('keydown', FloorR)//right
        window.addEventListener('keydown', FloorT)//top

        //MOVING RIGHT
        function detectRight(event){
          if (event.key == 'd'){ //detect key
          // within function only the last if statement will run
            Key = 'd'
            moveRight() //call function moveRight
            
        }}
        function moveRight (){
          player1.position.x+= 5 //move right
          Draw () //call draw function to update canvas
        }
        
        //MOVING DOWN
        function detectDown(event){
          if (event.key == 's'){
            Key = 's'
            moveDown()}
          }
                  
        function moveDown (){
            player1.position.y+= 5
            Draw () 
        }

        //MOVING LEFT
        function detectLeft(event){
          if (event.key == 'a'){
            Key = 'a'
            moveLeft()
        }}
        function moveLeft (){
          player1.position.x-= 5
          Draw ()
        }
        //MOVING UP
         function detectUp(event){
          if (event.key == 'w'){
            Key = 'w'
            moveUp()
        }}
         function moveUp (){
          player1.position.y-= 5
          Draw ()
        }

</script>
</section>

 <section> <!-- credits -->
    <h1>credits</h1>
    credits go here
    <ul>
      <li>om</li>
    </ul>
  </section>


    </main>
  </body>
</html>
