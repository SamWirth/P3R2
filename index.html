<!DOCTYPE html>
<html>
  <head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>TRICK OR TRAP</title>
  
    <link href="/style.css" rel="stylesheet" type="text/css" media="all">
  </head>

  <body onLoad="Draw ()">

    <main>
       
    <section> <!-- landing -->
      <h1>landing </h1>
      <p>beautiful logo!!</p>
    </section>
    
      <section><!-- demo -->
     <h1>Demo </h1>
        <p> demo video, screenshots, summary, etc</p>



        <p><strong>game summary:</strong></p>

        <p>WELCOME TO THE WORLD OF <strong>TRICK OR TRAP!</strong></p>
        <ul>HALLOWEEN NIGHT is coming to a close. Ghostie, in search of a house that still has candy finds this delightly spooky mansion, just barely off the beaten path.</p>
        <p>In a HAUNTING turn of events, a mysterious unseen force pushes Ghostie  through the door, and locks them inside! </p>
        <p>Will <em>you</em> be able to help them escape?</p>
        </ul><p>
        
    </section>
    
    <section> <!-- game -->
        <h1>Game </h1>

<p><strong> how to play:</strong></p>     
        <ul>
        <li> use WASD to move</li>
        <li>interact with objects by walking into them </li>
        <li>escape before time runs out!</li>
        <li>refresh the page to try again</li>
        <li> <Strong>press any key to start</Strong></li>       
        </ul>
                  <br>
        <div id= 'timer'>
    <strong> time remaining:</strong> <p id = 'test'>[00:00]</p></li>
          
<!-- load javascript so we can draw on canvas -->
<canvas id="myCanvas" width="600" height="600" 
        style="border:4px solid #ff0000; background-color:rgb(255, 255, 255)">
        Sorry, your browser does not support canvas.
        </canvas></div>
<script>

const canvas = document.querySelector('canvas')
const c = canvas.getContext('2d')
let key = 'f'

//sprites and global variables!

Character = new Image ();
Character.src = "placeholder sprites/MCF.JPG";

Background = new Image();
Background.src = "placeholder sprites/ROOM1.JPG";
RoomTracker = 'R1'

Vault = new Image();
Vault.src = "placeholder sprites/STUDY OBJECTS/vault.JPG"

let HasKey = false;
let KeyAlert = 0;
let DoorAlert = 0;
let timeStart = 0;
let timeEnd = false;

//CLASSES START///////////////////////////////////////////////////////////////////////////////////////////

//PLAYER CHARACTER
class Player {
  constructor({
    position = { x: 200, y: 200 },
    color = 'red',
    width = 100,
    height = 100,
    velocity = { x: 0, y: 0 },
  }) {
    this.position = position
    this.width = width
    this.height = height
    this.color = color
    this.velocity = velocity
  }

  draw() {
    c.drawImage(Character,this.position.x, this.position.y, this.width, this.height)
  }}

  //BACKDROPS
class Backdrop {
  constructor({
    position = { x: 0, y: 0 },
    width = 600,
    height = 600,
  }) {
    this.position = position
    this.width = width
    this.height = height
  }

  draw() {
    c.drawImage(Background,this.position.x, this.position.y, this.width, this.height)
  }}

  //DOORS
  class Door {
  constructor({
    position = { x: 200, y: 200 },
    color = 'blue',
    width = 100,
    height = 100,
    velocity = { x: 0, y: 0 },
  }) {
    this.position = position
    this.width = width
    this.height = height
    this.color = color
    this.velocity = velocity
  }

  draw() {
    c.lineWidth = 3
    c.strokeStyle = this.color
    c.strokeRect(this.position.x, this.position.y, this.width, this.height)
    
  }
  
}

//FLOOR
  class Floor {
  constructor({
    position = { x: 120, y: 160 },
    color = 'blue',
    width = 10,
    height = 10,
    velocity = { x: 0, y: 0 },
  }) {
    this.position = position
    this.width = width
    this.height = height
    this.color = color
    this.velocity = velocity
  }

  draw() {
  c.strokeStyle = this.color
  c.strokeRect(this.position.x, this.position.y, this.width, this.height)
  }
}


//OBJECTSSSs
class VaultClass {
  constructor({
    position = { x: 120, y: 160 },
    width = 100,
    height = 100,
    
  }) {
    this.position = position
    this.width = width
    this.height = height
  }

  draw() {
  c.drawImage(Vault,this.position.x, this.position.y, this.width, this.height)
  }
}



//CLASSES END///////////////////////////////////////////////////////////////////////////////////////////



// get canvas center
const center = {
  x: canvas.width / 2,
  y: canvas.height / 2,
}

// initiate Player
const player1 = new Player({
  position: {
    x: center.x - 120,
    y: center.y - 50,
  },
  velocity: {
    x: 0,
  },
})

//initiate background
const background1 = new Backdrop({
  position:{x:0,y:0,},
  room: 'R1',
})

// initiate Doors
const R1doorR = new Door({
  position: {
    x: 460,
    y: 280,
  },
  color: 'DeepSkyBlue',
})

const R2doorL = new Door({
  position: {
    x: 30,
    y: 340,
  },
  color: 'blue',
  show: true
})

const R2doorR = new Door({
  position: {
    x: 460,
    y: 340,
  },
  color: 'blue',
})

const R3doorL = new Door({
  position: {
    x: 30,
    y: 190,
  },
  color: 'DarkBlue',
})

const R1doorL = new Door({
  position: {
    x: 30,
    y: 280,
  },
  color: 'rebeccapurple',
})
// initiate floor boundary
const floor1 = new Floor({
  position: {
    x: 120,
    y: 140
  },
  width: 350,
  height: 20,
  color: 'red'
})

const floor2 = new Floor({
  position: {
    x: 470,
    y: 160
  },
  width: 20,
  height: 350,
  color: 'orange'
})

const floor3 = new Floor({
  position: {
    x: 100,
    y: 160
  },
  width: 20,
  height: 350,
  color: 'green'
})

const floor4 = new Floor({
  position: {
    x: 120,
    y: 510
  },
  width: 350,
  height: 20,
  color: 'purple'
})

//initializing objects

const vault1 = new VaultClass({
  position: {
    x: 100,
    y: 200
  },
})



function collision({ player1, R1doorR }) {
  return (
    player1.position.x + player1.width >= R1doorR.position.x && // player1 right collides with R1doorR left
    R1doorR.position.x + R1doorR.width >= player1.position.x && // R1doorR right collides with player1 left
    player1.position.y + player1.height >= R1doorR.position.y && // player1 bottom collides with R1doorR top
    R1doorR.position.y + R1doorR.height >= player1.position.y // player1 top collides with R1doorR bottom
  )
}

function collision1({ player1, floor1 }) {
  return (
    floor1.position.y + floor1.height >= player1.position.y // player1 top collides with R1doorR bottom
  )
}

function collision2({ player1, floor2 }) {
  return (
    player1.position.x + player1.width >= floor2.position.x  // player1 right collides with R1doorR left
  )
}

function collision3({ player1, floor3 }) {
  return (
    floor3.position.x + floor3.width >= player1.position.x  // R1doorR right collides with player1 left
  )
}

function collision4({ player1, floor4 }) {
  return (
    player1.position.y + player1.height >= floor4.position.y // player1 bottom collides with R1doorR top

  )
}

function collision5({ player1, R2doorL }) {
  return (
    player1.position.x + player1.width >= R2doorL.position.x && // player1 right collides with R1doorR left
    R2doorL.position.x + R2doorL.width >= player1.position.x && // R1doorR right collides with player1 left
    player1.position.y + player1.height >= R2doorL.position.y && // player1 bottom collides with R1doorR top
    R2doorL.position.y + R2doorL.height >= player1.position.y // player1 top collides with R1doorR bottom
  )
}

function collision6({ player1, R2doorR }) {
  return (
    player1.position.x + player1.width >= R2doorR.position.x && // player1 right collides with R1doorR left
    R2doorR.position.x + R2doorR.width >= player1.position.x && // R1doorR right collides with player1 left
    player1.position.y + player1.height >= R2doorR.position.y && // player1 bottom collides with R1doorR top
    R2doorR.position.y + R2doorR.height >= player1.position.y // player1 top collides with R1doorR bottom
  )
}

function collision7({ player1, R3doorL }) {
  return (
    player1.position.x + player1.width >= R3doorL.position.x && // player1 right collides with R1doorR left
    R3doorL.position.x + R3doorL.width >= player1.position.x && // R1doorR right collides with player1 left
    player1.position.y + player1.height >= R3doorL.position.y && // player1 bottom collides with R1doorR top
    R3doorL.position.y + R3doorL.height >= player1.position.y // player1 top collides with R1doorR bottom
  )
}

function collision8({ player1, R1doorL }) {
  return (
    player1.position.x + player1.width >= R1doorL.position.x && // player1 right collides with R1doorR left
    R1doorL.position.x + R1doorL.width >= player1.position.x && // R1doorR right collides with player1 left
    player1.position.y + player1.height >= R1doorL.position.y && // player1 bottom collides with R1doorR top
    R1doorL.position.y + R1doorL.height >= player1.position.y // player1 top collides with R1doorR bottom
  )
}

function collision9({ player1, R1doorL }) {
  return (
    player1.position.x + player1.width >= R1doorL.position.x && // player1 right collides with R1doorR left
    R1doorL.position.x + R1doorL.width >= player1.position.x && // R1doorR right collides with player1 left
    player1.position.y + player1.height >= R1doorL.position.y && // player1 bottom collides with R1doorR top
    R1doorL.position.y + R1doorL.height >= player1.position.y // player1 top collides with R1doorR bottom
  )
}

function collision10({ player1, vault1 }) {
  return (
    player1.position.x + player1.width >= vault1.position.x && // player1 right collides with R1doorR left
    vault1.position.x + vault1.width >= player1.position.x && // R1doorR right collides with player1 left
    player1.position.y + player1.height >= vault1.position.y && // player1 bottom collides with R1doorR top
    vault1.position.y + vault1.height >= player1.position.y // player1 top collides with R1doorR bottom
  )
}



/*function collision2({ player1, floor1 }) {
  return (
  player1.position.x + player1.width >= floor1.position.x &&
  floor1.position.x + floor1.width >= player1.position.x &&
  player1.position.y + player1.height >= floor1.position.y &&
  floor1.position.y+ floor1.height >= player1.position.y  
  )
}*/


let frame = 0

setInterval(() => {
  frame++
 
  //always draw
  


  //win screen
  if (RoomTracker == 'win'){
    background1.draw()
    player1.draw()
  }

  //game over screen
  if (RoomTracker == 'end'){
    background1.draw()
    
  }


  //Room 1
  if (RoomTracker == 'R1'){
    background1.draw()
    player1.draw()
    floor1.draw()
    floor2.draw()
    floor3.draw()
    floor4.draw()
    R1doorR.draw()
    R1doorL.draw()
  }
  
  //Room2
  if (RoomTracker =='R2'){
    background1.draw()
    player1.draw()
    floor1.draw()
    floor2.draw()
    floor3.draw()
    floor4.draw()
    R2doorL.draw()
    R2doorR.draw()
    vault1.draw()
}

  //Room3
  if (RoomTracker == 'R3'){
    background1.draw()
    player1.draw()
    floor1.draw()
    floor2.draw()
    floor3.draw()
    floor4.draw()
    R3doorL.draw()
  }


 

  


  // update x position before render
  player1.position.x += player1.velocity.x

  if (collision({ player1, R1doorR })) {
    if (RoomTracker == 'R1'){ //door 1 only works in room 1
      if (Key =='d'){
        player1.position.x = 140
        player1.position.y = 340
        Background.src = "placeholder sprites/ROOM2.JPG"
        R1doorR.show = false
        RoomTracker = 'R2'
      }
      if (Key =='a'){//box 1 top corner is set to R1doorR's top right corner (top left corner + R1doorR's width) + 1
        player1.position.x = R1doorR.position.x + R1doorR.width +1}
      if (Key == 'w'){//player1 top left corner is set to R1doorR's bottom left corner (top left corner + height) +1
        player1.position.y = R1doorR.position.y +R1doorR.height+1}
      if (Key == 's'){//player1 top left corner is set to R1doorR's top left corner - R1doorR's height -1
        player1.position.y = R1doorR.position.y - R1doorR.height - 1}
    }
  }

   /*
  if (collision2({ player1, floor1 })) {
      if (Key == 'd'){//player top right colliding with right boundary
        player1.position.x = floor1.position.x +floor1.width - player1.width
        }
      
      if (Key =='a'){//player top left colliding with left boundary
        player1.position.x = floor1.position.x + 1
        }
      
      if (Key == 'w'){//player top left colliding with top boundary
        player1.position.y = floor1.position.y + 1
        }

      
      if (Key == 's'){//player bottom left colliding with bottom boundary
        player1.position.y = floor1.position.y + floor1.height - player1.height
        
        }
  }*/
  
  if (collision1({ player1, floor1 })) {
      if (Key == 'w'){//player1 top left corner is set to R1doorR's bottom left corner (top left corner + height) +1
        player1.position.y = floor1.position.y +floor1.height+1}
  }

  if (collision2({ player1, floor2 })) {
      if (Key == 'd'){//player top right colliding with right boundary
        player1.position.x = floor1.position.x +floor1.width - player1.width
        }
  }

  if (collision3({ player1, floor3 })) {
      if (Key =='a'){//player top left colliding with left boundary
        player1.position.x = floor1.position.x + 1
        }
  }

  if (collision4({ player1, floor4 })) {
      if (Key == 's'){//player bottom left colliding with bottom boundary
        player1.position.y = floor4.position.y - player1.height
        }
  }
 
  if (collision5({ player1, R2doorL })) {
    if (RoomTracker == 'R2'){ 
      if (Key == 'd'){//box 1 top corner is set to box 2's top left corner - R1doorR's width - 1
        player1.position.x = R2doorL.position.x +R2doorL.width - player1.width}
      if (Key =='a'){//box 1 top corner is set to R1doorR's top right corner (top left corner + R1doorR's width) + 1
        player1.position.x = 350
        player1.position.y = 280
        Background.src = "placeholder sprites/ROOM1.JPG"
        RoomTracker = 'R1'
      }
      if (Key == 'w'){//player1 top left corner is set to R1doorR's bottom left corner (top left corner + height) +1
        player1.position.y = R2doorL.position.y +R2doorL.height+1}
      if (Key == 's'){//player1 top left corner is set to R1doorR's top left corner - R1doorR's height -1
        player1.position.y = R2doorL.position.y - R2doorL.height - 1}
    }
  }

   if (collision6({ player1, R2doorR })) {
    if (RoomTracker == 'R2'){ 
      if (Key =='d'){
        player1.position.x = 140
        player1.position.y = 190
        Background.src = "placeholder sprites/ROOM3.JPG"
        RoomTracker = 'R3'
      }
      if (Key =='a'){//box 1 top corner is set to R1doorR's top right corner (top left corner + R1doorR's width) + 1
        player1.position.x = R2doorR.position.x + R2doorR.width +1}
      if (Key == 'w'){//player1 top left corner is set to R1doorR's bottom left corner (top left corner + height) +1
        player1.position.y = R2doorR.position.y +R2doorR.height+1}
      if (Key == 's'){//player1 top left corner is set to R1doorR's top left corner - R1doorR's height -1
        player1.position.y = R2doorR.position.y - R2doorR.height - 1}
    }
  }

   if (collision7({ player1, R3doorL })) {
    if (RoomTracker == 'R3'){ 
      if (Key == 'd'){//box 1 top corner is set to box 2's top left corner - R1doorR's width - 1
        player1.position.x = R2doorL.position.x +R2doorL.width - player1.width}
      if (Key =='a'){//box 1 top corner is set to R1doorR's top right corner (top left corner + R1doorR's width) + 1
        player1.position.x = 350
        player1.position.y = 340
        Background.src = "placeholder sprites/ROOM2.JPG"
        RoomTracker = 'R2'
      }
      if (Key == 'w'){//player1 top left corner is set to R1doorR's bottom left corner (top left corner + height) +1
        player1.position.y = R2doorL.position.y +R2doorL.height+1}
      if (Key == 's'){//player1 top left corner is set to R1doorR's top left corner - R1doorR's height -1
        player1.position.y = R2doorL.position.y - R2doorL.height - 1}
    }
  }
  
  if (collision8({ player1, R1doorL })) {
    if (RoomTracker == 'R1'){ 
      if (HasKey == true){
        if (Key == 'd'){//box 1 top corner is set to box 2's top left corner - R1doorR's width - 1
          player1.position.x = R2doorL.position.x +R2doorL.width - player1.width}
        if (Key =='a'){//box 1 top corner is set to R1doorR's top right corner (top left corner + R1doorR's width) + 1
          player1.position.x = 180
          player1.position.y = 300
          Background.src = "placeholder sprites/winscreen.png"
          RoomTracker = 'win'
        }
        if (Key == 'w'){//player1 top left corner is set to R1doorR's bottom left corner (top left corner + height) +1
          player1.position.y = R2doorL.position.y +R2doorL.height+1}
        if (Key == 's'){//player1 top left corner is set to R1doorR's top left corner - R1doorR's height -1
          player1.position.y = R2doorL.position.y - R2doorL.height - 1}
    }}}

    if (collision9({ player1, R1doorL })) {
    if (RoomTracker == 'R1'){ 
      if (HasKey == false){
        if (Key == 'd'){//box 1 top corner is set to box 2's top left corner - R1doorR's width - 1
          player1.position.x = R2doorL.position.x +R2doorL.width - player1.width}
        if (Key =='a'){//box 1 top corner is set to R1doorR's top right corner (top left corner + R1doorR's width) + 1
          player1.position.x=150,
          DoorAlert +=1
          alerts()
        }
        if (Key == 'w'){//player1 top left corner is set to R1doorR's bottom left corner (top left corner + height) +1
          player1.position.y = R2doorL.position.y +R2doorL.height+1}
        if (Key == 's'){//player1 top left corner is set to R1doorR's top left corner - R1doorR's height -1
          player1.position.y = R2doorL.position.y - R2doorL.height - 1}
    }}}
    

     
  if (collision10({ player1, vault1 })) {
    if (RoomTracker =='R2'){
      if (Key =='a'){//player top left colliding with left boundary
        HasKey=true,
        KeyAlert += 1,
        player1.position.x = 200
      }
      if (Key == 'w'){//player top left colliding with top boundary
        HasKey=true,
        KeyAlert += 1,
        player1.position.y = 300
      }}
  }
 
  if (HasKey == true){
    if (KeyAlert == 1){ 
            alert ('you found a key in the vault!');
          }
  }

  if (RoomTracker != 'win'){
      if (timeEnd == true){
        Background.src = "placeholder sprites/gameover.png"
        RoomTracker = 'end'
      }
  }


  



}, 100)

        //movement
        window.addEventListener('keydown', detectRight) //event listner only listens for 1 action
        window.addEventListener('keydown', detectDown)
        window.addEventListener('keydown', detectLeft)
        window.addEventListener('keydown', detectUp)

        window.addEventListener ('keydown',timehandler)

      function timehandler (){
        timeStart +=1
        if (timeStart == 1){

          setInterval (
            function timer () { 
            var currentTime = new Date();
            var seconds = currentTime.getMinutes() * 60 + currentTime.getSeconds();
            var timeLimit = 30; //set to whatever you'd like
            var timeRemaining = timeLimit - seconds % timeLimit;
            var result = '[' + parseInt(timeRemaining /60) + ':' + timeRemaining % 60 +']';
            
              if (timeRemaining < timeLimit){
                displayresult = document.getElementById('test').innerHTML = result
              }
    
              if (timeRemaining == timeLimit){
                timeEnd = true  
              }

              if (timeEnd == true){
                displayresult =  document.getElementById('test').innerHTML = `
                <p style="display:none" text </p>
                    
                `  
              }

            
              
              }, 500)
        }

        
            
        }
                          


        //alerts
        function alerts (){ //for when everything hates me and nothing wants to work <3
          if (DoorAlert < 3){
            alert ("the door is locked!");
          }
        }

      

        //MOVING RIGHT
        function detectRight(event){
          if (event.key == 'd'){ //detect key
          // within function only the last if statement will run
            Key = 'd'
            moveRight() //call function moveRight
            
        }}
        function moveRight (){
          Character.src = "placeholder sprites/MCR.JPG";
          player1.position.x+= 5 //move right
          Draw () //call draw function to update canvas
        }
        
        //MOVING DOWN
        function detectDown(event){
          if (event.key == 's'){
            Key = 's'
            moveDown()}
          }
                  
        function moveDown (){
            Character.src = "placeholder sprites/MCF.JPG";
            player1.position.y+= 5
            Draw () 
        }

        //MOVING LEFT
        function detectLeft(event){
          if (event.key == 'a'){
            Key = 'a'
            moveLeft()
        }}
        function moveLeft (){
          Character.src = "placeholder sprites/MCL.JPG";
          player1.position.x-= 5
          Draw ()
        }
        //MOVING UP
         function detectUp(event){
          if (event.key == 'w'){
            Key = 'w'
            moveUp()
        }}
         function moveUp (){
          Character.src = "placeholder sprites/MCB.JPG";
          player1.position.y-= 5
          Draw ()
        }

</script>
</section>

 <section> <!-- credits -->
    <h1>Credits</h1>

    <p> <strong>Team Members:</strong></p>
    <ul>
      <li>Samanthi Wirth</li>
      <li>Makayla McLean</li>
    </ul>
    
    <br>
    
    <p><strong>Sources:</strong></p>
    <p>Sites referenced during the development of this project</p>
    <ul>
      <li> <a href="https://www.w3schools.com/graphics/canvas_intro.asp">html canvas graphics tutorial</a> </li>
      <li> <a href="https://thedailyfrontend.com/a-beginners-guide-to-javascript-event-listeners-and-handlers/">Javascript event handler and event listener guide</a> </li>
      <li> <a href="https://chriscourses.com/blog/coding-collision-detection-in-javascript">collision detection in javascript</a> </li>
      <li> <a href="https://stackoverflow.com/questions/16156832/javascript-countdown-to-next-real-5-minutes">stackoverflow: how to create a count-down timer </a> </li>
    </ul>
    <br>

    
    <p> <strong>Special thanks to:</strong></p>
    <ul>
      <li>Om Lohier</li>
      <li>Hadi Assaad</li>
      <li>Hazel Barreveld</li>
    </ul>

    <br>
    <br>
    <p><strong>Date created:</strong> November 10 2025 - December 6 2025 </p>
  </section>


    </main>
  </body>
</html>
